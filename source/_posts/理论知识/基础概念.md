---
title: 基础概念
date: 2024-05-09
categories: 理论知识
---

# 数据库系统构成
- 数据库系统
    1. 数据库物理层
    2. 数据库管理系统DBMS
    3. 数据库应用程序
    <!-- more -->

## 1.数据库(物理层)
- 数据的物理存储，机器码，不可读写

## 2.数据库管理系统DBMS(底层开发)
- 是数据库系统的核心组成部分,它连接着数据库应用程序和数据库
- 建立在操作系统的基础上，对数据库进行统一管理和控制
- 主要功能
    - 描述，管理，维护数据库
    - 数据通信

> [e.g.] 常见DBMS: MySql, Oracle, SqlServer

## 3.数据库应用程序
- 面向终端用户，为用户提供数据信息服务
- 与DBMS通信，从而进行与数据库的交互

> [e.g.] 常见应用程序: 图书管理系统，职工管理系统

## 数据库系统的特点

- 数据结构化 
- 数据的共享性高，冗余度低，易扩充
- 数据独立性高 
- 数据由DBMS统一管理控制

# 三个世界
1. 机器世界-实际存在 0101【物理级】
2. 信息世界--抽象加工【概念级】
3. 现实世界-实际存在【用户级】


# 三级结构+两级独立性

- 隔离复杂的状况、确保信息安全，映射隔离了各层之间的相互影响，实现数据独立性
- **不是**所有数据库系统都具有三级结构两级独立性的特点

## 三级结构
1. 物理级（内模式）
    - 数据的物理存储
    - 1个数据库只能有唯一的内模式
2. 概念级（概念模式）
    - DBMS
    - 1个数据库只能有唯一的概念模式
3. 应用级（外模式）
    - 实际的App
    - 1个数据库可以有n个外模式

- 三级结构的理解
  - 现实世界-实际存在【用户级】
  - **信息世界**--抽象加工（不同人不一样，取决于设计者的看法）【概念级】
  - 机器世界-实际存在0101【物理级】

- [e.g.] 机器世界的一条记录，例如【xxx，111，2022级，100分】
  - 这个记录对应于信息世界的实体； 记录中有很多个字段，其实就是信息世界的属性；多条记录存放于文件之中，代表着实体集合；
  - 一条记录中能代表这条记录的字段、字段集就是记录键，对应于信息世界中能代表一个实体的属性、属性集合，叫作实体键。
  - 通过信息世界把现实世界和机器世界联系起来，信息世界要能从现实世界抽象出一些人类可以理解的指标，然后这些指标需要和机器世界一一对应。

## 两级独立性
1. 物理独立性
    - 物理级->概念级 的映像
    - 对于DBMS而言，无需考虑物理存储的具体方式，解耦
    
    > [e.g.] 比如系统为了提升硬件性能，更换了性能更好的硬盘，对于DBMS而言是没有任何差别的
2. 逻辑独立性
    - 概念级->应用级 的映像
    - 对于用户应用而言，无需考虑DBMS中数据的具体组织方式
    
    > [e.g.] 假设DBMS中为了优化结构，将student表进行了垂直分表
    >
    > 但是定义一个视图student_view供应用交互
    >
    > 则对于应用而言，分表前后应用的逻辑并没有任何差别


# 数据模型

| 数据模型类型 | 数据结构 | 特点 |
| ---- | ---- | ---- |
| 层次数据模型 | 树 | 利于描述层次关系 |
| 网络数据模型 | 图 | 速度快，难 |
| 关系数据模型 | 二维表 | 直观  **DBMS所采用的** |
| 面向对象数据模型 | 对象 | 模仿对象行为 |

# 关系模型3要素

## 关系数据结构

- 从用户角度，关系模型中数据的逻辑结构是一张**二维表**

  > 关系模型实体E(属性1, 属性2, 属性3,...)

## 关系操作

- 特点：操作的对象和结果都是**集合**

## 关系完整性

- 对应**数据完整性**




# 数据完整性

## 域完整性

- 又叫列完整性，
- 判断某个列的值是不是有效，是否为空
- 相关技术:默认值,空值, CHECK 约束,规则

## 实体完整性
- 又叫行完整性
- 保证表中的行有唯一标示符
- 相关技术：主键，UNIQUE 唯一键

## 参考完整性
- 用来保证表之间的关系的完整
- 相关技术：外键

## 用户定义完整性

- 允许创建业务规则来确保值的有效性,从而使之落在需要范围之内。

- 相关技术：触发器和存储过程

  > [e.g.] 自定义购买商品后销量+1这个规则


# SQL语言
## SQL语言的组成
- 数据定义语言DDL
- 数据操控语言DML
- 数据控制语言DCL
- 数据查询语言DQL
- TCL(commit rollback)
- 其他语言要素ALE

## 区分DDL与DML

### 定义的区别
- DDL代表数据定义语言，是一种有助于创建数据库模式的SQL命令
  > [e.g.] `DROP`是DDL，直接释放空间
- DML代表数据操作语言，是一种有助于检索和管理关系数据库中数据的SQL命令
  > [e.g.] `DELETE`是DML，打标签，而不真正释放空间

### 作用对象的区别
  - DDL命令会影响整个数据库或表
    > [e.g.] `DROP TABLE` `CREATE VIEW` `ALTER INDEX`...
  - DML命令会影响表中的一个或多个记录
    > [e.g.] `INSERT INTO`, `UPDATE SET`, `DELETE FROM`


## 关键词
- 数据对象的定义语句：创建是create、修改是alter不是update、删除是drop不是delete


# 其他

## 数据库系统的发展历程
- 人工管理->文件管理->数据库管理

## 数据库完整性与安全性
- 数据库的完整性：防止合法用户无意中对数据库造成破坏，防范对象是不合语义的的数据
- 数据库的安全性：防止不合法用户故意对数据库造成破坏

## 备份有几种方式，差异是什么
### 完整数据库备份

### 差异备份
备份自**上一次完整数据库备份**后修改过的数据库页。

### 事务日志备份
仅备份事务日志。事务日志是自上次备份后（不论这个备份是完全备份、差异备份还是事务日志备份）对数据库执行的所有事务的备份。可以使用事务日志备份将数据库恢复到特定的即时点。

### 文件或文件组备份
仅备份数据库中某个文件或文件组，用于恢复位于故障磁盘上的那部分，用于超大型数据库，不同时间备份不同的部分。

## 安全性的不同level(?)

## 并发
### 并发会造成的数据不一致问题
- 丢失修改（lost update）
  > 两个事务T1和T2读入同一个数据并修改，T2提交的结果破坏了T1提交的结果，导致了T1的修改被丢失
- 不可重复读（non-repeatable read）
  > 事务T1读取数据后，事务T2执行更新操作，使T1无法再现前一次读取的结果
- 读“脏”数据（dirty read）
  > 当前事务(A)中可以读到其他事务(B)未提交的数据（脏数据）

### 锁
- **锁**是数据库中用来处理并发的一种对象，它允许事务用一定的方法锁定所需要的资源

## 事务
ACID属性Atom, Consistency, Isolation, Durability

