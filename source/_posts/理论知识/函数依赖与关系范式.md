---
title: 函数依赖与关系范式
date: 2024-05-10 10:57:51
categories: 理论知识
---

# 基本概念
## 函数依赖
- 基础概念
若对于给定的X, 必然有唯一确定的Y, 则称**X决定Y**, 即**Y依赖于X**，记作: X->Y
<!-- more -->
- 完全依赖/部分依赖
    - 若X->Y, 并且任意X子集X’, 均有X’->Y，则Y完全依赖X，X-f->Y
    - 若X->Y, 但不是X所有子集均决定Y, 则Y部分依赖X, X-p->Y

- 传递依赖
X->Y, Y->Z, 则X->Z

> [e.g.] 以SDC(SNO,DEPT,MNAME,CNAME,GRADE)为例
> - ∵ sno->dept && dept->mname ∴ sno->mname	// 传递依赖
> - (sno,cname)->grade				// 完全依赖
> - (sno,cname,mname)->grade        // 部分依赖

## 常用推导规则
- 合并规则：由X->Y,X->Z,有X->YZ
    > XX->XY, XY->ZY, ∴XX->YZ,X->YZ
- 伪传递规则：由X->Y, WY->Z,有XW->Z
    > XW->WY, WY->Z, ∴XW->Z
- 分解规则：由X->Y, Z属于Y, 有X->Z

## 并不是规范化程度越高的关系就越优
- 规范化程度越高，往往意味着**查询**操作需要额外的**连接** / **计算**操作，消耗较大
    > [e.g.] 学生成绩(学号,英语,数学,语文,平均分)
        > - 存在函数依赖：学号->英语，学号->数学，学号->语文，学号->平均分，(英语, 数学, 语文)->平均分
        > - 显然有**学号->(英语,数学,语文)->平均分**，所以该关系模式中存在传递函数信赖，是2NF关系，不满足3NF
        > - 虽然平均成绩可以由其他属性推算出来，但如果应用中需要经常查询学生的平均成绩，为提高效率，仍然可保留该冗余数据，对关系模式不再做进一步分解
- 一般而言，2NF, 3NF是比较合适的


# 判断关系模式属于第几范式
- 根据1NF, 2NF, 3NF的定义来进行判断
    > - 每个属性都不可再细分->1NF
    > - 非主属性都依赖于主属性->2NF
    > - 无传递依赖->3NF

# 判断候选码
- 如果有属性**不在**函数依赖集中**出现**，那么它必须包含在候选码中
- 如果有属性**只**在函数依赖集的**右边**出现，那么它必须**不在**候选码中
- 如果有属性**只**在函数依赖集的**左边**出现，则该属性一定**包含**在候选码中
- 如果有属性或属性组能唯一标识元组，则它就是候选码
    > 通过函数依赖推导出，某属性或属性组，能决定所有属性

> [e.g.] r<U,f>, U=(A,B,C,G,H,I). f={A->B, A->C, CG->H, CG->I, B->H}
    > 1. A,CG只在依赖集左边出现，所以A,CG在候选码集合中
    > 2. H,I只在右边出现，一定不在候选码中
    > 3. (A,C,G)->(A,C,G,B,H,I)，检查确认无法再化简，所以候选码为(A,C,G)

> [e.g.] sdc(sno,dept,mname,cname,grade)找出该关系的主码
    > 1. **(sno,cname)->grade**
    > 2. sno->dept ∴ **(sno,cname)->dept**
    > 3. dept->mname ∴sno->mname ∴ **(sno,cname)->mname**
    > 4. 综上，**(sno,cname)->(sno,cname,grade,dept,mname)**
    > 5. 所以(sno,cname)是主键


# 求最小函数依赖集合


# 分解关系模式，使其满足2NF

# 分解关系模式，使其满足3NF

